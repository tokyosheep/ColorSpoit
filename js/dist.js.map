{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/main.js","webpack:///external \"@babel/polyfill\"","webpack:///external \"fs\""],"names":["window","onload","csInterface","CSInterface","themeManager","init","getColor","document","getElementById","colorObj","reflect","saveJSON","savedList","fs","require","filePath","getSystemPath","SystemPath","EXTENSION","extensionRoot","evalScript","json_path","addEventListener","o","obj","JSON","parse","console","log","removeChildren","Object","entries","forEach","key","value","writeList","parent","firstChild","removeChild","li","createElement","textContent","appendChild","dataset","CreateColorObj","btn","alert","lists","querySelectorAll","colorData","v","AdoptColor","getColorProp","Array","from","getElementsByClassName","id","checked","fillIn","stroke","stringify","SaveJson","name","readJson","jsonList","push","writeJson","JsonList","topLi","radioBtn","makeRadio","ul","label","classList","add","_input","type","div","json","Promise","resolve","reject","writeFile","err","readFile","data","objects","pickJson","loadJson"],"mappings":"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","file":"dist.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./js/main.js\");\n","import \"@babel/polyfill\";\n\nwindow.onload = () =>{\n    \"use strict\";\n    var csInterface = new CSInterface();\n    themeManager.init();\n    \n    const getColor = document.getElementById(\"getColor\");\n    const colorObj = document.getElementById(\"colorObj\");\n    const reflect = document.getElementById(\"reflect\");\n    const saveJSON = document.getElementById(\"saveJSON\");\n    const savedList = document.getElementById(\"savedList\");\n    const fs = require(\"fs\");\n    \n    const filePath = csInterface.getSystemPath(SystemPath.EXTENSION) +`/js/`;\n    const extensionRoot = csInterface.getSystemPath(SystemPath.EXTENSION) +`/jsx/`;\n    csInterface.evalScript(`$.evalFile(\"${extensionRoot}json2.js\")`);//json2読み込み\n    const json_path = `${extensionRoot}colorData.json`;\n    \n    getColor.addEventListener(\"click\",()=>{\n        csInterface.evalScript(`$.evalFile(\"${extensionRoot}readColor.jsx\")`,(o)=>{\n            const obj = JSON.parse(o);\n            console.log(obj);\n            removeChildren(colorObj);\n            Object.entries(obj).forEach(([key,value])=>{\n                writeList(colorObj,value,key);\n            });\n        });\n    });\n    \n    function removeChildren(parent){\n        while(parent.firstChild){\n            parent.removeChild(parent.firstChild);\n        }\n    }\n    \n    function writeList(parent,value,key){\n        const li = document.createElement(\"li\");\n        li.textContent = `${key}:${value}`;\n        parent.appendChild(li);\n        li.dataset.value = value;\n        li.dataset.key = key;\n    }\n    \n    class CreateColorObj{\n        constructor(btn){\n            this.btn = btn;\n        }\n        \n        getColorProp(){\n            if(!colorObj.firstChild){\n                alert(\"カラー情報が登録されていません\");\n                return false;\n            }\n            const lists = document.querySelectorAll(\"#colorObj li\");\n            console.log(lists);\n            const colorData = {};\n            lists.forEach(v=>{\n                colorData[v.dataset.key] = v.dataset.value;\n            });\n            return colorData;\n        }\n    }\n    \n    class AdoptColor extends CreateColorObj{\n        constructor(btn){\n            super(btn);\n            this.btn.addEventListener(\"click\",this);\n        }\n        \n        handleEvent(){\n            const colorData = this.getColorProp();\n            Array.from(document.getElementsByClassName(\"adoptColor\")).forEach(v=>{\n                colorData[v.id] = v.checked;\n            });\n            if(!colorData){\n                return;\n            }\n            if(!colorData.fillIn&&!colorData.stroke){\n                alert(\"線か塗りのどちらかにチェックをつけてください\");\n                return false;\n            }\n            csInterface.evalScript(`setColor(${JSON.stringify(colorData)})`);\n        }\n    }\n    \n    const fillIn = new AdoptColor(reflect);\n    \n    class SaveJson extends CreateColorObj{\n        constructor(btn){\n            super(btn);\n            this.btn.addEventListener(\"click\",this);\n        }\n        \n        async handleEvent(){\n            const colorData = this.getColorProp();\n            colorData.name = document.getElementById(\"colorName\").value;\n            if(!colorData){\n                return;\n            }\n            const jsonList = await readJson();\n            jsonList.push(colorData);\n            await writeJson(JsonList);\n        }\n        \n        async loadJson(){\n            const jsonList = await readJson();\n            removeChildren(savedList);\n            jsonList.forEach(v=>{\n                \n                const topLi = document.createElement(\"li\");\n                savedList.appendChild(topLi);\n                const radioBtn = makeRadio();\n                savedList.appendChild(radioBtn);\n                const ul = document.createElement(\"ul\");\n                topLi.appendChild(ul);\n                \n                Object.entries(v).forEach(([key,value])=>{\n                    writeList(ul,value,key);\n                });\n            });\n        }\n    }\n    \n    function makeRadio(){\n        const label = document.createElement(\"label\");\n        label.classList.add(\"topcoat-radio-button\");\n        const _input = document.createElement(\"input\");\n        _input.type = \"radio\";\n        _input.name = \"preset\";\n        label.appendChild(_input);\n        const div = document.createElement(\"div\");\n        div.classList.add(\"topcoat-radio-button__checkmark\");\n        label.appendChild(div);\n        return label;\n    }\n    \n    function writeJson(json){\n        return new Promise((resolve,reject)=>{\n            fs.writeFile(json_path,JSON.stringify(json,null,4),err=>{\n                if(err){\n                    alert(err);\n                    reject(false);\n                }else{\n                    csInterface.evalScript(`alert(\"your preset is saved\")`);\n                }\n                resolve(true);\n            })\n        })\n    }\n    \n    function readJson(){\n        return new Promise((resolve,reject)=>{\n            fs.readFile(json_path,\"utf-8\",(err,data)=>{\n                if(err){\n                    alert(err);\n                    reject(false);\n                }\n                const objects = JSON.parse(data);\n                resolve(objects);\n            })\n        });\n    }\n    \n    const pickJson = new SaveJson(saveJSON);\n    pickJson.loadJson();\n}\n","module.exports = require(\"@babel/polyfill\");","module.exports = require(\"fs\");"],"sourceRoot":""}